---
layout: post
title: Linux vim plugin
category: Linux
comments: true


---

# vim & plugin

我的[.vimrc](https://github.com/hursion/Linux/blob/master/.vimrc)
关于[配置参考](https://www.cnblogs.com/zhongcq/p/3642794.html)



# 01 必知会

https://github.com/yangyangwithgnu/use_vim_as_ide



## python

* ```shell
  删除python (**注意系统的python谨慎卸载**)
  
  sudo apt-get remove python3.5
  
  sudo apt-get remove --auto-remove python3.5
  
  sudo apt-get purge --auto-remove python3.5
  
  自定义安装python
  
    108  ./configure  --enable-shared --enable-unicode=ucs4 --prefix=/home/hursion.zhang/tools/Python385
    109  make
    110  sudo make install
  
  报错 zipimport.ZipImportError: can't decompress data; zlib not available ubuntu方法
  
    113  sudo apt-get install zlib1g-dev
    114  make 
    115  sudo make install
  ```

  

## 安装带python的vim

```shell
git clone git@github.com:vim/vim.git
cd vim/
./configure --with-features=huge --enable-multibyte --enable-rubyinterp=yes --enable-perlinterp=yes --enable-python3interp=yes  --enable-perlinterp=yes --enable-luainterp=yes  --enable-gui=gtk2 --enable-cscope --prefix=/usr/local

make VIMRUNTIMEDIR=/usr/local/share/vim/vim82
make install
此前要注意将python3和python3-config ln -s到指定安装的版本
Q：checking for tgetent()... configure: error: NOT FOUND!
sudo apt-get install libncurses5-dev



构建完成后在 vim 中执行
:echo has('python')
若输出 1 则表示构建出的 vim 已支持 python，反之，0 则不支持，如果没效果，试试
sudo apt-get install python-dev
sudo apt-get install python3-dev

需要重新配置可 输入 make distclean #清理一下上一次编译生成的所有文件
```

## Vundle

```shell
git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim

cp .vimrc  ~/.vimrc

:PluginUpdate
```



## universal-ctags

universal-ctags是什么？A maintained ctags implementation, [https://ctags.io](https://ctags.io/),一个负责的ctags实现，在github上开源并且持续更新和维护。

不多说，快点安装吧：

```bash
sudo apt install autoconf
cd /tmp
git clone https://github.com/universal-ctags/ctags
cd ctags
./autogen.sh
./configure --prefix=/opt/software/universal-ctags  # 我的安装路径。你按自己的情况调整。
make -j8
sudo make install
```

把ctags可执行文件更新到系统PATH上？No,我选择创建链接的方式：

```
# 如果你装了emacs-snapshot，那么现在的ctags命令实际上链接到了/usr/bin/ctags-snapshot，要先删除链接文件：
# sudo rm /usr/bin/ctags

# 然后，把新编译安装的universal-ctags链接过来：
sudo ln -s /opt/software/universal-ctags/bin/ctags /usr/bin/ctags
```





## YouCompleteMe

```shell
1.下载9.0的clang，修改环境变量或者ln -s指定

2.sudo cp /home/hursion.zhang/tools/clang_llvm_9/lib/libclang.so /usr/local/lib

注意环境中有libclang.so 才能编译带libclang的YouCompleteMe

~/.vim/bundle/YouCompleteMe$/install.py --clang-completer --system-libclang
```





快捷键

let mapleader=";"

" 定义快捷键到行首和行尾
nmap LB 0 
nmap LE $ 

" 设置快捷键将选中文本块复制至系统剪贴板
vnoremap <Leader>y "+y 
" 设置快捷键将系统剪贴板内容粘贴至vim
nmap <Leader>p "+p 
          
" 定义快捷键关闭当前分割窗口
nmap <Leader>q :q<CR>
" 定义快捷键保存当前窗口内容
nmap <Leader>w :w<CR>
" 定义快捷键保存所有窗口内容并退出 vim
nmap <Leader>WQ :wa<CR>:q<CR>
" 不做任何保存，直接退出 vim
nmap <Leader>Q :qa!<CR>
          
" 设置快捷键遍历子窗口
" 依次遍历
nnoremap nw <C-W><C-W>
" 跳转至右方的窗口
nnoremap <Leader>lw <C-W>l
" 跳转至方的窗口
nnoremap <Leader>hw <C-W>h
" 跳转至上方的子窗口
nnoremap <Leader>kw <C-W>k
" 跳转至下方的子窗口
nnoremap <Leader>jw <C-W>j
          
" 定义快捷键在结对符之间跳转
nmap <Leader>M %

" *.cpp 和 *.h 间切换
nmap <silent> <Leader>sw :FSHere<cr>

" 设置显示／隐藏标签列表子窗口的快捷键。速记：identifier list by tag
nnoremap <Leader>ilt :TagbarToggle<CR>

" 正向遍历同名标签
nmap <Leader>tn :tnext<CR>
" 反向遍历同名标签
nmap <Leader>tp :tprevious<CR>

" 基于语义的代码导航

nnoremap <leader>jc :YcmCompleter GoToDeclaration<CR>
" 只能是 #include 或已打开的文件
nnoremap <leader>jd :YcmCompleter GoToDefinition<CR>

" 使用 ctrlsf.vim 插件在工程内全局查找光标所在关键字，设置快捷键。快捷键速记法：search in project
nnoremap <Leader>sp :CtrlSF<CR>

" 不确认、非整词
nnoremap <Leader>R :call Replace(0, 0, input('Replace '.expand('<cword>').' with: '))<CR>
" 不确认、整词
nnoremap <Leader>rw :call Replace(0, 1, input('Replace '.expand('<cword>').' with: '))<CR>
" 确认、非整词
nnoremap <Leader>rc :call Replace(1, 0, input('Replace '.expand('<cword>').' with: '))<CR>
" 确认、整词
nnoremap <Leader>rcw :call Replace(1, 1, input('Replace '.expand('<cword>').' with: '))<CR>
nnoremap <Leader>rwc :call Replace(1, 1, input('Replace '.expand('<cword>').' with: '))<CR>

" YCM 集成 OmniCppComplete 补全引擎，设置其快捷键
inoremap <leader>; <C-x><C-o>

" 定义:Man命令查看各类man信息的快捷键
nmap <Leader>man :Man 3 <cword><CR>

" 使用 NERDTree 插件查看工程文件。设置快捷键，速记：file list
nmap <Leader>fl :NERDTreeToggle<CR>

" 显示/隐藏 MiniBufExplorer 窗口
map <Leader>bl :MBEToggle<cr>
           
" buffer 切换快捷键
map <C-Tab> :MBEbn<cr>
map <C-S-Tab> :MBEbp<cr>

" 快速选中结对符内的文本

" 快捷键   
map <SPACE> <Plug>(wildfire-fuel)
vmap <S-SPACE> <Plug>(wildfire-water)

" 调用 gundo 树
nnoremap <Leader>ud :GundoToggle<CR>

cscope快捷说明

  s: 查找C语言符号，即查找函数名、宏、枚举值等出现的地方

  g: 查找函数、宏、枚举等定义的位置，类似ctags所提供的功能

  d: 查找本函数调用的函数

  c: 查找调用本函数的函数

  t: 查找指定的字符串

  e: 查找egrep模式，相当于egrep功能，但查找速度快多了

  f: 查找并打开文件，类似vim的find功能

  i: 查找包含本文件的文件

;sp ag搜索

;y 复制

;p 粘贴



