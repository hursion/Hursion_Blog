```
添加调用属性的打印 log确认下，谢谢~

diff --git a/libc/bionic/system_properties.cpp b/libc/bionic/system_properties.cpp
index 011fedd..4f40151 100644
--- a/libc/bionic/system_properties.cpp
+++ b/libc/bionic/system_properties.cpp
@@ -1275,11 +1275,32 @@ static void detect_protocol_version() {
   }
 }

+char * get_proc_name() {
+    char path[64];
+    static char procnamebuf[128];
+    char *procname = NULL;
+    FILE *fp;
+
+    snprintf(path, sizeof(path), "/proc/%d/cmdline", getpid());
+    if ((fp = fopen(path, "r"))) {
+       procname = fgets(procnamebuf, sizeof(procnamebuf), fp);
+       fclose(fp);
+    }
+    return procname;
+}
+
 int __system_property_set(const char* key, const char* value) {
   if (key == nullptr) return -1;
   if (value == nullptr) value = "";
   if (strlen(value) >= PROP_VALUE_MAX) return -1;

+  if(!strcmp(key,"sys.powerctl")){
+      async_safe_format_log(ANDROID_LOG_WARN,
+             "libc",
+             "[SPRD_DBG]%s(%s,%s),pid = %d,proc = %s",
+             __FUNCTION__, key,value,getpid(),get_proc_name());
+  }
+
   if (g_propservice_protocol_version == 0) {
     detect_protocol_version();
   }
```

打印

```
[SPRD_DBG]__system_property_set(sys.powerctl,shutdown,),pid = 491,proc = /system/bin/reboot
```



```
PS -A对应父进程，再执行
debuggerd -b XXX(pid)可以打印出堆栈信息，先尝试下是否可以直接操作，如果不行我们在执行__system_property_set(sys.powerctl,shutdown,)
```



```
从堆栈推断是modemd执行的，看起来是licence导致的关机，麻烦licence同事确认下~

"modemd" sysTid=304
  #00 pc 00049eec  /system/lib/libc.so (wait4+8)
  #01 pc 00045d59  /system/lib/libc.so (system+104)
  #02 pc 0000192d  /vendor/bin/modemd (test_power_off+52)
  #03 pc 00001c4f  /vendor/bin/modemd (halo_verify+270)
  #04 pc 00001fd1  /vendor/bin/modemd (main+228)
  #05 pc 000769c1  /system/lib/libc.so (__libc_init+48)
  #06 pc 000016e0  /vendor/bin/modemd (_start_main+88)


275  void test_power_off()
...
300  
301      status = system("/system/bin/reboot -p");
302  
303      if (-1 == status)
304      {
305          ENG_LOG("system error! try count %d",try_count);
306          try_count ++;
307          if(try_count < 10)
308              goto retry;
309      }
```